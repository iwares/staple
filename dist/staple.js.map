{"version":3,"sources":["core/application.js","core/aside.js","core/dialog.js","core/html-parser.js","core/interaction-manager.js","core/interaction.js","core/nls.js","core/periodical-task.js","core/popup.js","core/snippets.js","core/toast.js","core/uuid.js","core/noumenon.js"],"names":["define","require","exports","module","InteractionManager","default","browserFeatureCheckers","sessionStorage","storage","window","key","value","setItem","result","getItem","removeItem","e","localStorage","historyManagement","h","history","pushState","replaceState","requiredBrowserFeatures","_ref","Symbol","$attrs","$temps","Preferences","_classCallCheck","this","load","_createClass","json","data","JSON","parse","stringify","get","Application","sharedInstance","Error","Object","defineProperty","method","apply","Array","prototype","slice","call","arguments","constructor","name","create","notifySuperCalled","invokeMethodAndEnsureSuperCalled","resume","im","pause","state","interactionManager","saveState","saveApplicationState","title","document","length","go","close","destroy","features","alert","namespace","feature","list","checked","i","checker","push","home","interaction","extra","location","attrs","meta","head","split","concat","checkBrowserFeatures","onBrowserFeaturesNotSupport","url","origin","pathname","back","hash","undefined","loadThenDeleteApplicationState","startInteraction","restoreState","addEventListener","handlePopState","bind","handleHashChange","handleUnload","handleBackPressed","shared","PeriodicalTask","HTMLParser","Aside","gravity","content","_this","frame","createElement","classList","add","setContent","overlayManager","outsideTouchHandler","dismiss","attachOutsideTouchHandler","detachOutsideTouchHandler","removeEventListener","fadeinTask","run","root","attachTask","detachTask","detach","showing","toString","elements","HTMLElement","evt","stopPropagation","innerHTML","appendChild","selector","$A","querySelectorAll","querySelector","attach","darken","start","stop","remove","lighten","Dialog","_this2","cancelable","cancelOnTouchOutside","cancel","eventName","listener","dispatchToListener","open","onBackPressed","factroy","html","child","children","UUID","active","body","indicator","loading","interrupter","busy","style","backgroundColor","desktop","prefix","vendor","Webkit","Moz","O","toLowerCase","contexts","target","context","temp","findByUUID","uuid","top","previous","instances","maxInstanceCount","paused","performSaveInstanceState","instantiateActivedInteraction","parent","request","setBusy","setTimeout","performStartInteraction","performFinishInteraction","zIndex","classes","randomUUID","requestCode","resultCode","resultData","pendingResults","excess","animation","staple","application","onLastInteractionFinished","doInteractionCreated","setLoading","doInteractionClassLoaded","clazz","performRestoreInstanceState","EASINGI","EASINGO","upper","lower","outer","ueasing","leasing","uanim","lanim","anim","dataset","insertBefore","results","externalResult","evalJSON","r","onInteractionResult","upperCss","lowerCss","cssText","onAnimationComplete","removeChild","_ref2","OverlayManager","panel","id","updater","darkness","childElementCount","overlay","lastElementChild","previousElementSibling","Interaction","$peeker","_this3","tasks","creating","onclick","event","handler","getAttribute","preventDefault","parentElement","onRestoreInstanceState","onTitleChanged","getTitle","onSaveInstanceState","finish","finishInteraction","getPreferences","reslovedTitle","runnable","ms","repeat","task","Number","isInteger","set","setTitle","NLSBundleLoader","bundle","languages","onload","onMasterLoaded","master","parts","needed","names","language","_typeof","onPartsLoaded","source","@name","prop","config","isBuild","navigator","customizedLanguage","lang","unique","map","sequence","tid","restart","clearInterval","clearTimeout","startFunc","setInterval","Popup","_this4","adjustPopupPosition","x","y","pg","ox","oy","pgstrs","replace","offsetWidth","offsetHeight","left","anchor","tx","ty","ag","arect","getBoundingClientRect","agstrs","right","bottom","showAtLocation","SnippetsLoader","path","text","error","_this5","xhr","XMLHttpRequest","toUrl","onreadystatechange","readyState","status","onHTMLNotLoaded","onHTMLLoaded","send","matches","responseText","match","onNLSResolved","nlsphs","namemap","pair","substr","onNLSLoaded","notifyError","bundles","nlsph","el","snippets","els","tagName","type","trim","Toast","duration","_this6","fadeoutTask","dismissTask","_this7","show","CHARS","chars","rnd","Math","random","join","args","search","bust","fields","field","kv","decodeURIComponent","tag","metaTags","Date","getTime","mainScript","scriptPath","main","base","stapleRoot","lastIndexOf","requirejs","baseUrl","urlArgs","waitSeconds","paths","subclass","baseclass","BaseClass"],"mappings":"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","file":"staple.js","sourcesContent":["/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/application.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple application.\ndefine('staple/application', function (require, exports, module) {\n\n\tconst InteractionManager = require('staple/interaction-manager').default;\n\n\tconst browserFeatureCheckers = {\n\n\t\tsessionStorage : function () {\n\t\t\tlet storage = window.sessionStorage;\n\t\t\tif (!storage)\n\t\t\t\treturn false;\n\t\t\ttry {\n\t\t\t\tlet [key, value] = ['staple:///test/staple', 'staple'];\n\t\t\t\tstorage.setItem(key, value);\n\t\t\t\tlet result = (value === storage.getItem(key));\n\t\t\t\tstorage.removeItem(key);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\tlocalStorage : function () {\n\t\t\tlet storage = window.localStorage;\n\t\t\tif (!storage)\n\t\t\t\treturn false;\n\t\t\ttry {\n\t\t\t\tlet [key, value] = ['staple:///test/staple', 'staple'];\n\t\t\t\tstorage.setItem(key, value);\n\t\t\t\tlet result = (value === storage.getItem(key));\n\t\t\t\tstorage.removeItem(key);\n\t\t\t\treturn result;\n\t\t\t} catch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\n\t\thistoryManagement : function () {\n\t\t\tlet h = window.history;\n\t\t\treturn typeof(h.pushState) === 'function' && typeof(h.replaceState) === 'function';\n\t\t},\n\n\t};\n\n\tconst requiredBrowserFeatures = ['sessionStorage'];\n\n\tconst [$attrs, $temps] = [Symbol(), Symbol()];\n\n\tclass Preferences {\n\n\t\tconstructor (key) {\n\t\t\tthis[$attrs] = {key: key};\n\t\t\tthis.load();\n\t\t}\n\n\t\tload () {\n\t\t\tlet json = localStorage.getItem(this[$attrs].key) || '{}';\n\t\t\tthis[$attrs].data = JSON.parse(json);\n\t\t\treturn this;\n\t\t}\n\n\t\tput (key, value) {\n\t\t\tthis[$attrs].data[key] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\tget (key) {\n\t\t\treturn this[$attrs].data[key];\n\t\t}\n\n\t\tclear () {\n\t\t\tthis[$attrs].data = {};\n\t\t\treturn this;\n\t\t}\n\n\t\tget raw () {\n\t\t\treturn this[$attrs].data;\n\t\t}\n\n\t\tcommit () {\n\t\t\tlet json = JSON.stringify(this[$attrs].data)\n\t\t\tlocalStorage.setItem(this[$attrs].key, json);\n\t\t}\n\n\t}\n\n\tclass Application {\n\n\t\tconstructor () {\n\t\t\tif (Application.sharedInstance)\n\t\t\t\tthrow new Error('Instance of Application already exist.');\n\t\t\tObject.defineProperty(Application, \"sharedInstance\", {value: this});\n\t\t\tthis[$attrs] = {};\n\t\t\tthis[$temps] = {};\n\t\t}\n\n\t\tinvokeMethodAndEnsureSuperCalled (method) {\n\t\t\tthis[$temps][method] = false;\n\t\t\tlet result = this[method].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\tif (this[$temps][method] != method)\n\t\t\t\tthrow new Error('super.' + method + '() not called in ' + this.constructor.name + '.' + method + '()');\n\t\t\tdelete this[$temps][method];\n\t\t\treturn result;\n\t\t}\n\n\t\tnotifySuperCalled (method) {\n\t\t\tthis[$temps][method] = method;\n\t\t}\n\n\t\tonCreate () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.create();\n\t\t\tthis.notifySuperCalled('onCreate');\n\t\t}\n\n\t\tresume () {\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onResume');\n\t\t}\n\n\t\tonResume () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.resume();\n\t\t\tthis.notifySuperCalled('onResume');\n\t\t}\n\n\t\tpause () {\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onPause');\n\t\t}\n\n\t\tonPause () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.pause();\n\t\t\tlet state = {};\n\t\t\tstate.interactionManager = im.saveState();\n\t\t\tthis.saveApplicationState(state);\n\t\t\tthis.notifySuperCalled('onPause');\n\t\t}\n\n\t\tonTitleChanged (title) {\n\t\t\twindow.document.title = title;\n\t\t}\n\n\t\tonLastInteractionFinished () {\n\t\t\tlet history = window.history;\n\t\t\tif (history.length > 2) {\n\t\t\t\thistory.go(-2);\n\t\t\t} else {\n\t\t\t\twindow.close();\n\t\t\t}\n\t\t}\n\n\t\tonDestroy () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.destroy();\n\t\t\tthis.notifySuperCalled('onDestroy');\n\t\t}\n\n\t\tonBrowserFeaturesNotSupport (features) {\n\t\t\talert('Browser Features Not Support:\\n' + JSON.stringify(features));\n\t\t\t// Do not continue by default.\n\t\t\treturn false;\n\t\t}\n\n\t\tloadThenDeleteApplicationState () {\n\t\t\tlet key = 'staple://' + this.namespace + '/imstate';\n\t\t\tlet json = sessionStorage[key];\n\t\t\tif (!json)\n\t\t\t\treturn undefined;\n\t\t\tsessionStorage.removeItem(key);\n\t\t\treturn JSON.parse(json);\n\t\t}\n\n\t\tsaveApplicationState (state) {\n\t\t\tlet key = 'staple://' + this.namespace + '/imstate';\n\t\t\tsessionStorage.removeItem(key);\n\t\t\tif (!state)\n\t\t\t\treturn;\n\t\t\tlet json = JSON.stringify(state);\n\t\t\tsessionStorage[key] = json;\n\t\t}\n\n\t\tcheckBrowserFeatures (features) {\n\t\t\tlet list = [], checked = {};\n\t\t\tfor (let i = 0, feature; feature = features[i]; ++i) {\n\t\t\t\tlet checker = browserFeatureCheckers[feature];\n\t\t\t\tif (checked[feature])\n\t\t\t\t\tcontinue;\n\t\t\t\tchecked[feature] = true;\n\t\t\t\tif (checker && checker())\n\t\t\t\t\tcontinue;\n\t\t\t\tlist.push(feature);\n\t\t\t}\n\t\t\treturn list;\n\t\t}\n\n\t\tstart (home, interaction, extra) {\n\t\t\tlet history = window.history, location = window.location,\n\t\t\t\tattrs = this[$attrs], features = this.meta['browser-features'],\n\t\t\t\tim = InteractionManager.sharedInstance;\n\n\t\t\tlet historyManagement = window.document.head.meta['history-management'] != 'disable';\n\n\t\t\t// Check required browser features.\n\t\t\tfeatures = features ? features.split(',') : [];\n\t\t\tfeatures.concat(requiredBrowserFeatures);\n\t\t\tif (historyManagement)\n\t\t\t\tfeatures.push('historyManagement');\n\t\t\tfeatures = this.checkBrowserFeatures(features);\n\n\t\t\tif (features.length && this.onBrowserFeaturesNotSupport(features))\n\t\t\t\treturn;\n\n\t\t\tattrs.url = location.origin + location.pathname;\n\t\t\tattrs.back = false;\n\n\t\t\tif (historyManagement) {\n\t\t\t\tif (history.state !== '$1') {\n\t\t\t\t\thistory.replaceState('$0', '', attrs.url);\n\t\t\t\t\thistory.pushState('$1', '', attrs.url);\n\t\t\t\t} else {\n\t\t\t\t\thistory.back();\n\t\t\t\t\tattrs.back = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (location.hash !== '#$1')\n\t\t\t\t\tlocation.hash = '$1'\n\t\t\t\telse\n\t\t\t\t\tinteraction = undefined;\n\t\t\t}\n\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onCreate');\n\n\t\t\tlet state = this.loadThenDeleteApplicationState();\n\n\t\t\tif (extra)\n\t\t\t\textra = JSON.parse(extra);\n\n\t\t\tif (interaction) {\n\t\t\t\tim.startInteraction(undefined, undefined, interaction, extra);\n\t\t\t} else if (state && state.interactionManager) {\n\t\t\t\tim.restoreState(state.interactionManager);\n\t\t\t} else if (home) {\n\t\t\t\tim.startInteraction(undefined, undefined, home, extra);\n\t\t\t} else {\n\t\t\t\tthrow new Error('Home not specified.');\n\t\t\t}\n\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onResume');\n\n\t\t\tif (historyManagement) {\n\t\t\t\twindow.addEventListener('popstate', this.handlePopState.bind(this));\n\t\t\t} else {\n\t\t\t\twindow.addEventListener('hashchange', this.handleHashChange.bind(this));\n\t\t\t}\n\n\t\t\twindow.addEventListener('unload', this.handleUnload.bind(this));\n\t\t}\n\n\t\thandlePopState () {\n\t\t\tlet history = window.history, attrs = this[$attrs];\n\t\t\tif (history.state == '$1') {\n\t\t\t\thistory.back();\n\t\t\t\tattrs.back = true;\n\t\t\t} else if (attrs.back) {\n\t\t\t\thistory.pushState('$1', '', attrs.url);\n\t\t\t\tattrs.back = false;\n\t\t\t} else {\n\t\t\t\tthis.handleBackPressed();\n\t\t\t\thistory.pushState('$1', '', attrs.url);\n\t\t\t}\n\t\t}\n\n\t\thandleHashChange () {\n\t\t\tlet location = window.location;\n\t\t\tif (location.hash !== '#$1') {\n\t\t\t\tthis.handleBackPressed();\n\t\t\t\tlocation.hash = '$1';\n\t\t\t}\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.handleBackPressed();\n\t\t}\n\n\t\thandleUnload () {\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onPause');\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onDestroy');\n\t\t}\n\n\t\tgetPreferences (name, shared) {\n\t\t\tlet namespace = shared ? '' : this.namespace,\n\t\t\t\tkey = 'staple://' + namespace + '/prefs/' + name;\n\t\t\tlet preferences = new Preferences(key);\n\t\t\treturn preferences;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Application', {value: Application});\n\tObject.defineProperty(exports, 'default', {value: Application});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/aside.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple aside.\ndefine('staple/aside', function (require, exports, module) {\n\n\tconst PeriodicalTask = require('staple/periodical-task').default;\n\tconst HTMLParser = require('staple/html-parser').default;\n\n\tconst $attrs = Symbol();\n\n\tclass Aside {\n\n\t\tconstructor (interaction, gravity, content) {\n\t\t\tlet attrs = this[$attrs] = {};\n\n\t\t\tattrs.frame = window.document.createElement('div');\n\t\t\tattrs.frame.classList.add('staple-overlay-mask');\n\t\t\tattrs.frame.handleBackPressed = this.handleBackPressed.bind(this);\n\n\t\t\tattrs.gravity = gravity;\n\n\t\t\tif (content)\n\t\t\t\tthis.setContent(content);\n\n\t\t\tattrs.overlayManager = interaction.overlayManager;\n\n\t\t\tlet outsideTouchHandler = this.dismiss.bind(this);\n\n\t\t\tattrs.attachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.addEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.detachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.removeEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.fadeinTask = new PeriodicalTask(100, false);\n\t\t\tattrs.fadeinTask.run = () => {\n\t\t\t\tlet root = this[$attrs].root;\n\t\t\t\tif (!root)\n\t\t\t\t\treturn;\n\t\t\t\troot.classList.add('staple-active');\n\t\t\t};\n\n\t\t\tattrs.attachTask = new PeriodicalTask(800, false);\n\t\t\tattrs.attachTask.run = attrs.attachOutsideTouchHandler.bind(attrs);\n\n\t\t\tattrs.detachTask = new PeriodicalTask(300, false);\n\t\t\tattrs.detachTask.run = attrs.overlayManager.detach.bind(attrs.overlayManager, attrs.frame);\n\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tsetContent (content) {\n\t\t\tif (Object.prototype.toString.call(content) === '[object String]') {\n\t\t\t\tlet elements = HTMLParser.parse(content);\n\t\t\t\tif (elements.length != 1)\n\t\t\t\t\tthrow new Error('Invalid content');\n\t\t\t\tcontent = elements[0];\n\t\t\t}\n\n\t\t\tif (!(content instanceof HTMLElement))\n\t\t\t\tthrow new Error('Content must be an HTML element');\n\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tswitch (attrs.gravity) {\n\t\t\tcase 'bottom':\n\t\t\t\tcontent.classList.add('staple-aside-bottom');\n\t\t\t\tbreak;\n\t\t\tcase 'top':\n\t\t\t\tcontent.classList.add('staple-aside-top');\n\t\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tcontent.classList.add('staple-aside-right');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontent.classList.add('staple-aside-left');\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcontent.addEventListener('click', evt => evt.stopPropagation());\n\t\t\tcontent.classList.add('staple-aside');\n\t\t\tattrs.frame.innerHTML = '';\n\t\t\tattrs.frame.appendChild(this[$attrs].root = content);\n\t\t}\n\n\t\tselect (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn [ root ];\n\t\t\treturn $A(root.querySelectorAll(selector));\n\t\t}\n\n\t\tselectOne (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn root;\n\t\t\treturn root.querySelector(selector);\n\t\t}\n\n\t\tshow () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tattrs.showing = true;\n\t\t\tattrs.overlayManager.attach(attrs.frame);\n\t\t\tattrs.overlayManager.darken();\n\n\t\t\tattrs.fadeinTask.start(true);\n\t\t\tattrs.attachTask.start(true);\n\t\t\tattrs.detachTask.stop();\n\t\t}\n\n\t\tdismiss () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tattrs.fadeinTask.stop();\n\t\t\tattrs.attachTask.stop();\n\t\t\tattrs.detachTask.start(true);\n\t\t\tattrs.detachOutsideTouchHandler();\n\t\t\tif (attrs.root)\n\t\t\t\tattrs.root.classList.remove('staple-active');\n\t\t\tattrs.overlayManager.lighten();\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tget showing() {\n\t\t\treturn this[$attrs].showing;\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tthis.dismiss();\n\t\t\treturn true;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Aside', {value: Aside});\n\tObject.defineProperty(exports, 'default', {value: Aside});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/dialog.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple dialog.\ndefine('staple/dialog', function (require, exports, module) {\n\n\tconst PeriodicalTask = require('staple/periodical-task').default;\n\tconst HTMLParser = require('staple/html-parser').default;\n\n\tconst $attrs = Symbol();\n\n\tclass Dialog {\n\n\t\tconstructor (interaction, content) {\n\t\t\tlet attrs = this[$attrs] = {};\n\n\t\t\tattrs.frame = window.document.createElement('div');\n\t\t\tattrs.frame.classList.add('staple-overlay-mask');\n\t\t\tattrs.frame.handleBackPressed = this.handleBackPressed.bind(this);\n\n\t\t\tif (content)\n\t\t\t\tthis.setContent(content);\n\n\t\t\tattrs.overlayManager = interaction.overlayManager;\n\n\t\t\tlet outsideTouchHandler = () => {\n\t\t\t\tif (!this.cancelable || !this.cancelOnTouchOutside)\n\t\t\t\t\treturn;\n\t\t\t\tthis.cancel();\n\t\t\t};\n\n\t\t\tattrs.attachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.addEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.detachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.removeEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.fadeinTask = new PeriodicalTask(100, false);\n\t\t\tattrs.fadeinTask.run = () => {\n\t\t\t\tlet root = this[$attrs].root;\n\t\t\t\tif (!root)\n\t\t\t\t\treturn;\n\t\t\t\troot.classList.add('staple-active');\n\t\t\t};\n\n\t\t\tattrs.attachTask = new PeriodicalTask(800, false);\n\t\t\tattrs.attachTask.run = attrs.attachOutsideTouchHandler.bind(attrs);\n\n\t\t\tattrs.detachTask = new PeriodicalTask(300, false);\n\t\t\tattrs.detachTask.run = attrs.overlayManager.detach.bind(attrs.overlayManager, attrs.frame);\n\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tdispatchToListener (eventName) {\n\t\t\tlet listener = this[eventName + 'Listener'] || this;\n\t\t\tif (Object.prototype.toString.call(listener[eventName]) !== '[object Function]')\n\t\t\t\treturn;\n\t\t\tlistener[eventName](this);\n\t\t}\n\n\t\tshow () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tattrs.showing = true;\n\t\t\tattrs.overlayManager.attach(attrs.frame);\n\t\t\tattrs.overlayManager.darken();\n\n\t\t\tattrs.fadeinTask.start(true);\n\t\t\tattrs.attachTask.start(true);\n\t\t\tattrs.detachTask.stop();\n\n\t\t\tthis.dispatchToListener('onShow');\n\t\t}\n\n\t\tdismiss () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tthis.dispatchToListener('onDismiss');\n\n\t\t\tattrs.fadeinTask.stop();\n\t\t\tattrs.attachTask.stop();\n\t\t\tattrs.detachTask.start(true);\n\t\t\tattrs.detachOutsideTouchHandler();\n\t\t\tif (attrs.root)\n\t\t\t\tattrs.root.classList.remove('staple-active');\n\t\t\tattrs.overlayManager.lighten();\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tcancel () {\n\t\t\tif (!this[$attrs].showing)\n\t\t\t\treturn;\n\t\t\tthis.dispatchToListener('onCancel');\n\t\t\tthis.dismiss();\n\t\t}\n\n\t\tsetContent (content) {\n\t\t\tif (Object.prototype.toString.call(content) === '[object String]') {\n\t\t\t\tlet elements = HTMLParser.parse(content);\n\t\t\t\tif (elements.length != 1)\n\t\t\t\t\tthrow new Error('Invalid content');\n\t\t\t\tcontent = elements[0];\n\t\t\t}\n\n\t\t\tif (!(content instanceof HTMLElement))\n\t\t\t\tthrow new Error('Content must be an HTML element');\n\n\t\t\tcontent.addEventListener('click', evt => evt.stopPropagation());\n\t\t\tcontent.open = true;\n\t\t\tcontent.classList.add('staple-dialog');\n\t\t\tlet attrs = this[$attrs];\n\t\t\tattrs.frame.innerHTML = '';\n\t\t\tattrs.frame.appendChild(this[$attrs].root = content);\n\t\t}\n\n\t\tselect (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn [ root ];\n\t\t\treturn $A(root.querySelectorAll(selector));\n\t\t}\n\n\t\tselectOne (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn root;\n\t\t\treturn root.querySelector(selector);\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tthis.onBackPressed();\n\t\t\treturn true;\n\t\t}\n\n\t\tonBackPressed () {\n\t\t\tif (!this.cancelable)\n\t\t\t\treturn;\n\t\t\tthis.cancel();\n\t\t}\n\n\t\tget showing () {\n\t\t\treturn this[$attrs].showing;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Dialog', {value: Dialog});\n\tObject.defineProperty(exports, 'default', {value: Dialog});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/html-parser.js\n * @author\tEric.Tsai\n *\n */\n\n// HTML parser.\ndefine('staple/html-parser', function (require, exports, module) {\n\n\tconst factroy = window.document.createElement('div');\n\n\tclass HTMLParser {\n\n\t\tconstructor () {\n\t\t\tthrow new Error('This class can not be initialized');\n\t\t}\n\n\t}\n\n\tHTMLParser.parse = function (html) {\n\t\tfactroy.innerHTML = html;\n\t\tlet children = factroy.children, result = [];\n\t\tfor (let i = 0, child; child = children[i]; ++i)\n\t\t\tresult.push(child);\n\t\tfactroy.innerHTML = '';\n\t\treturn result;\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'HTMLParser', {value: HTMLParser});\n\tObject.defineProperty(exports, 'default', {value: HTMLParser});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/interaction-manager.js\n * @author\tEric.Tsai\n *\n */\n\ndefine('staple/interaction-manager', function (require, exports, module) {\n\n\tconst HTMLParser = require('staple/html-parser').default;\n\tconst UUID = require('staple/uuid').default;\n\n\tconst snippets = '' +\n\t\t'<div id=\"staple-interrupter\" class=\"staple-interrupter\"></div>' +\n\t\t'<div id=\"staple-desktop\" class=\"staple-desktop\"></div>' +\n\t\t'';\n\n\tconst $attrs = Symbol();\n\n\tclass InteractionManager {\n\n\t\tconstructor () {\n\t\t\tif (InteractionManager.sharedInstance)\n\t\t\t\tthrow new Error('Instance of InteractionManager already exist.');\n\t\t\tthis[$attrs] = {};\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tlet active = this[$attrs].active;\n\t\t\tif (!active)\n\t\t\t\treturn;\n\t\t\tactive.handleBackPressed();\n\t\t}\n\n\t\tcreate () {\n\t\t\tlet body = window.document.body;\n\n\t\t\t// Initialize loading indicator.\n\t\t\tlet attrs = this[$attrs];\n\t\t\tattrs.indicator = body.querySelector('#staple-indicator');\n\t\t\tattrs.loading = false;\n\n\t\t\tlet elements = HTMLParser.parse(snippets);\n\n\t\t\t// Initialize a interrupter used to interrupt user inputs when framework is busy.\n\t\t\tlet interrupter = attrs.interrupter = elements[0];\n\t\t\tattrs.busy = false;\n\t\t\tinterrupter.style.backgroundColor = 'transparent';\n\t\t\tbody.appendChild(interrupter);\n\n\t\t\t// Initialize desktop.\n\t\t\tlet desktop = attrs.desktop = elements[1];\n\t\t\tbody.appendChild(desktop);\n\n\t\t\t// Reslove CSS prefix.\n\t\t\tlet prefix = '', vendors = { Webkit: 'webkit', Moz: '', O: 'o' };\n\t\t\tfor (let vendor in vendors) {\n\t\t\t\tif (desktop.style[vendor + 'TransitionProperty'] === undefined)\n\t\t\t\t\tcontinue;\n\t\t\t\tprefix = '-' + vendor.toLowerCase() + '-';\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tattrs.prefix = prefix;\n\n\t\t\t// Initialize interaction context stack.\n\t\t\tlet contexts = attrs.contexts = [];\n\t\t\tcontexts.remove = function(target) {\n\t\t\t\tlet temp = this.concat();\n\t\t\t\tthis.length = 0;\n\t\t\t\tfor (let i = 0, context; context = temp[i]; ++i) {\n\t\t\t\t\tif (target === context)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tthis.push(context);\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\tcontexts.findByUUID = function(uuid) {\n\t\t\t\tfor (let i = 0, context; context = this[i]; ++i) {\n\t\t\t\t\tif (context.uuid !== uuid)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\treturn context;\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t};\n\n\t\t\tcontexts.top = function() {\n\t\t\t\treturn this[this.length - 1];\n\t\t\t};\n\n\t\t\tattrs.active = attrs.previous = null;\n\t\t\tattrs.instances = {};\n\t\t\tattrs.maxInstanceCount = 8;\n\t\t\tattrs.paused = true;\n\t\t}\n\n\t\tpause () {\n\t\t\tlet attrs = this[$attrs], interaction = attrs.active,\n\t\t\t\tcontexts = attrs.contexts;\n\n\t\t\tif (attrs.paused)\n\t\t\t\treturn;\n\t\t\tattrs.paused = true;\n\n\t\t\tif (contexts.length === 0 || !interaction)\n\t\t\t\treturn;\n\n\t\t\t// Pause active interaction.\n\t\t\tlet context = interaction[$attrs].context;\n\t\t\tinteraction.pause();\n\t\t\tlet state = {};\n\t\t\tinteraction.performSaveInstanceState(state);\n\t\t\tcontext.state = state;\n\t\t}\n\n\t\tsaveState () {\n\t\t\tif (this[$attrs].contexts.length === 0)\n\t\t\t\treturn undefined;\n\t\t\treturn { contexts : this[$attrs].contexts }\n\t\t}\n\n\t\trestoreState (state) {\n\t\t\tlet attrs = this[$attrs], contexts = attrs.contexts;\n\t\t\tcontexts.length = 0;\n\t\t\tArray.prototype.push.apply(contexts, state.contexts);\n\t\t}\n\n\t\tresume () {\n\t\t\tlet attrs = this[$attrs], interaction = attrs.active;\n\n\t\t\tif (!attrs.paused)\n\t\t\t\treturn;\n\t\t\tattrs.paused = false;\n\n\t\t\tif (interaction) {\n\t\t\t\tinteraction.resume();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.instantiateActivedInteraction();\n\t\t}\n\n\t\tdestroy () {\n\t\t\tlet attrs = this[$attrs], contexts = attrs.contexts,\n\t\t\t\tinstances = attrs.instances;\n\t\t\tfor (let i = contexts.length - 1, context; context = contexts[i]; --i) {\n\t\t\t\tlet interaction = instances[context.uuid];\n\t\t\t\tif (!interaction)\n\t\t\t\t\tcontinue;\n\t\t\t\tinteraction.destroy();\n\t\t\t\tdelete instances[context.uuid];\n\t\t\t}\n\t\t\tcontexts.length = 0;\n\t\t}\n\n\t\tstartInteraction (parent, request, target, extra) {\n\t\t\tthis.setBusy(true);\n\t\t\tif (\"undefined\" != typeof extra)\n\t\t\t\textra = JSON.parse(JSON.stringify(extra));\n\t\t\tsetTimeout(this.performStartInteraction.bind(this, parent, request, target, extra));\n\t\t}\n\n\t\tfinishInteraction (uuid) {\n\t\t\tthis.setBusy(true);\n\t\t\tsetTimeout(this.performFinishInteraction.bind(this, uuid));\n\t\t}\n\n\t\tsetBusy (busy) {\n\t\t\tlet attrs = this[$attrs];\n\t\t\tif (attrs.busy == busy)\n\t\t\t\treturn;\n\t\t\tattrs.interrupter.style.zIndex = busy ? 2000000000 : 0;\n\t\t\tattrs.busy = busy;\n\t\t}\n\n\t\tsetLoading (loading) {\n\t\t\tlet attrs = this[$attrs];\n\t\t\tif (attrs.loading == loading)\n\t\t\t\treturn;\n\t\t\tlet classes = attrs.indicator.classList;\n\t\t\tif (loading)\n\t\t\t\tclasses.add('staple-active');\n\t\t\telse\n\t\t\t\tclasses.remove('staple-active');\n\t\t\tattrs.loading = loading;\n\t\t}\n\n\t\tperformStartInteraction (parent, request, target, extra) {\n\t\t\tlet attrs = this[$attrs], interaction = attrs.active,\n\t\t\t\tcontexts = attrs.contexts,\n\t\t\t\tinstances = attrs.instances;\n\n\t\t\t// Deactive actived interaction.\n\t\t\tif (interaction) {\n\t\t\t\tlet context = contexts.top(), state = {};\n\n\t\t\t\tinteraction.pause();\n\t\t\t\tinteraction.performSaveInstanceState(state);\n\t\t\t\tcontext.state = state;\n\n\t\t\t\tattrs.previous = interaction;\n\t\t\t\tattrs.active = null;\n\t\t\t}\n\n\t\t\t// create context for new interaction.\n\t\t\tlet context = {\n\t\t\t\tuuid : UUID.randomUUID(),\n\t\t\t\tparent : parent,\n\t\t\t\trequestCode : request,\n\t\t\t\tname : target,\n\t\t\t\textra : extra,\n\t\t\t\tresultCode : 'CANCEL',\n\t\t\t\tresultData : undefined,\n\t\t\t\tpendingResults : []\n\t\t\t};\n\n\t\t\t// Clean up instances if the stack size is to large.\n\t\t\tif (contexts.length >= attrs.maxInstanceCount) {\n\t\t\t\tlet excess = contexts[contexts.length - attrs.maxInstanceCount];\n\t\t\t\tlet instance = instances[excess.uuid];\n\t\t\t\tif (instance)\n\t\t\t\t\tinteraction.destroy();\n\t\t\t\tdelete instances[excess.uuid];\n\t\t\t}\n\n\t\t\t// Push context to the stack and instantizte it.\n\t\t\tcontexts.push(context);\n\t\t\tattrs.animation = 'start';\n\t\t\tthis.instantiateActivedInteraction();\n\t\t}\n\n\t\tperformFinishInteraction (uuid) {\n\t\t\tlet attrs = this[$attrs], interaction = attrs.active,\n\t\t\t\tcontexts = attrs.contexts,\n\t\t\t\tinstances = attrs.instances;\n\n\t\t\tlet context = contexts.findByUUID(uuid);\n\t\t\tif (!context)\n\t\t\t\treturn;\n\n\t\t\tlet parent = contexts.findByUUID(context.parent);\n\t\t\tif (parent) {\n\t\t\t\tlet result = {\n\t\t\t\t\trequest : context.requestCode,\n\t\t\t\t\tresult : context.resultCode,\n\t\t\t\t\tdata : context.resultData,\n\t\t\t\t};\n\t\t\t\tparent.pendingResults.push(result);\n\t\t\t}\n\n\t\t\tdelete instances[context.uuid];\n\n\t\t\tif (context !== contexts.top()) {\n\t\t\t\tcontexts.remove(context);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinteraction.pause();\n\t\t\tinteraction.destroy();\n\n\t\t\tattrs.previous = interaction;\n\t\t\tattrs.active = null;\n\t\t\tcontexts.remove(context);\n\n\t\t\tif (contexts.length == 0) {\n\t\t\t\tstaple.application.onLastInteractionFinished()\n\t\t\t\tattrs.desktop.innerHTML = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattrs.animation = 'finish';\n\t\t\tthis.instantiateActivedInteraction();\n\t\t}\n\n\t\tinstantiateActivedInteraction () {\n\t\t\t// We are going to instantiate context which at the top of the stack.\n\t\t\tlet attrs = this[$attrs], contexts = attrs.contexts,\n\t\t\t\tinstances = attrs.instances;\n\t\t\tlet context = contexts.top();\n\n\t\t\tif (!context || this[$attrs].paused)\n\t\t\t\treturn;\n\n\t\t\t// lookup instance from the instance map.\n\t\t\tlet interaction = instances[context.uuid];\n\n\t\t\tif (interaction) {\n\t\t\t\t// instance exists, we don't need to restore state\n\t\t\t\t// just delete saved state.\n\t\t\t\tdelete context.state;\n\t\t\t\tthis.doInteractionCreated(interaction);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We are going to do some async jobs, set the loading flag to true.\n\t\t\tthis.setLoading(true);\n\n\t\t\t// Async load interaction class\n\t\t\tlet require = window.require;\n\t\t\trequire([context.name], this.doInteractionClassLoaded.bind(\n\t\t\t\tthis, context\n\t\t\t\t));\n\t\t}\n\n\t\tdoInteractionClassLoaded (context, clazz) {\n\t\t\tlet attrs = this[$attrs], contexts = attrs.contexts;\n\n\t\t\tif (context != contexts.top())\n\t\t\t\treturn;\n\n\t\t\tlet interaction = new clazz.default($attrs, context);\n\t\t\tinteraction[$attrs].context = context;\n\n\t\t\tinteraction.create(context.state);\n\t\t\tthis.doInteractionCreated(interaction);\n\t\t}\n\n\t\tdoInteractionCreated (interaction) {\n\t\t\tlet attrs = this[$attrs], contexts = attrs.contexts,\n\t\t\t\tinstances = attrs.instances;\n\t\t\tlet context = interaction[$attrs].context;\n\n\t\t\tif (context != contexts.top())\n\t\t\t\treturn;\n\n\t\t\tinstances[context.uuid] = interaction;\n\t\t\tthis.setLoading(false);\n\n\t\t\tif (context.state)\n\t\t\t\tinteraction.performRestoreInstanceState(context.state);\n\t\t\tdelete context.state;\n\n\t\t\tlet root = interaction[$attrs].root;\n\t\t\tif (!root)\n\t\t\t\tthrow new Error('Please call setContent() during onCreate().');\n\n\t\t\tlet EASINGI = 'cubic-bezier(.4,1,.6,1)',\n\t\t\t\tEASINGO = 'cubic-bezier(.4,0,.6,0)';\n\n\t\t\tlet upper, lower, outer, ueasing, leasing, uanim, lanim, anim;\n\n\t\t\t// Reslove animation configuration.\n\t\t\tswitch (attrs.animation) {\n\t\t\tcase 'start':\n\t\t\t\tupper = interaction;\n\t\t\t\tlower = attrs.previous;\n\t\t\t\touter = lower;\n\t\t\t\tanim = 'staple-it-' + (upper[$attrs].root.dataset.anim || 'default');\n\t\t\t\tuanim = anim + '-enter';\n\t\t\t\tueasing = EASINGI;\n\t\t\t\tlanim = anim + '-push';\n\t\t\t\tleasing = EASINGO;\n\t\t\t\tattrs.desktop.appendChild(root);\n\t\t\t\tbreak;\n\t\t\tcase 'finish':\n\t\t\t\tupper = attrs.previous;\n\t\t\t\tlower = interaction;\n\t\t\t\touter = upper;\n\t\t\t\tanim = 'staple-it-' + (upper[$attrs].root.dataset.anim || 'default');\n\t\t\t\tuanim = anim + '-leave';\n\t\t\t\tueasing = EASINGO;\n\t\t\t\tlanim = anim + '-pop';\n\t\t\t\tleasing = EASINGI;\n\t\t\t\tattrs.desktop.insertBefore(root, upper ? upper[$attrs].root : undefined);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tupper = interaction;\n\t\t\t\tattrs.desktop.appendChild(root);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// handle pending results.\n\t\t\tlet results = context.pendingResults;\n\t\t\t// fatch and append external result.\n\t\t\tlet key = 'staple:///results/' + context.uuid;\n\t\t\tlet externalResult = sessionStorage[key];\n\t\t\tif (externalResult)\n\t\t\t\tresults.push(externalResult.evalJSON());\n\t\t\tsessionStorage.removeItem(key);\n\t\t\t// dispatch pending results.\n\t\t\tfor (let i = 0, r; r = results[i]; ++i)\n\t\t\t\tinteraction.onInteractionResult(r.request, r.result, r.data);\n\t\t\tresults.length = 0;\n\n\t\t\tinteraction.resume();\n\n\t\t\tlet upperCss = upper ? upper[$attrs].root.style.context : '';\n\t\t\tlet lowerCss = lower ? lower[$attrs].root.style.context : '';\n\n\t\t\tfunction onAnimationComplete () {\n\t\t\t\tif (outer)\n\t\t\t\t\tattrs.desktop.removeChild(outer[$attrs].root);\n\t\t\t\tif (upper)\n\t\t\t\t\tupper[$attrs].root.style.cssText = upperCss;\n\t\t\t\tif (lower)\n\t\t\t\t\tlower[$attrs].root.style.cssText = lowerCss;\n\t\t\t\tthis.setBusy(false);\n\t\t\t}\n\n\t\t\tif (anim && attrs.previous) {\n\t\t\t\tif (upper)\n\t\t\t\t\tupper[$attrs].root.style.cssText += ';'\n\t\t\t\t\t\t+ attrs.prefix + 'animation:' + uanim + ' .2s ' + ueasing + ';'\n\t\t\t\t\t\t+ attrs.prefix + 'animation-fill-mode: both' + ';';\n\t\t\t\tif (lower)\n\t\t\t\t\tlower[$attrs].root.style.cssText += ';'\n\t\t\t\t\t\t+ attrs.prefix + 'animation:' + lanim + ' .2s ' + leasing + ';'\n\t\t\t\t\t\t+ attrs.prefix + 'animation-fill-mode: both' + ';';\n\t\t\t\tsetTimeout(onAnimationComplete.bind(this), 300);\n\t\t\t} else {\n\t\t\t\tonAnimationComplete.apply(this);\n\t\t\t}\n\n\t\t\tattrs.active = interaction;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(InteractionManager, \"sharedInstance\", {value: new InteractionManager()});\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'InteractionManager', {value: InteractionManager});\n\tObject.defineProperty(exports, 'default', {value: InteractionManager});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/interaction.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple interaction.\ndefine('staple/interaction', function (require, exports, module) {\n\n\tconst InteractionManager = require('staple/interaction-manager').default;\n\tconst Application = require('staple/application').default;\n\tconst HTMLParser = require('staple/html-parser').default;\n\tconst PeriodicalTask = require('staple/periodical-task').default;\n\n\tconst [$attrs, $temps] = [Symbol(), Symbol()];\n\n\tclass OverlayManager {\n\n\t\tconstructor () {\n\t\t\tthis.panel = window.document.createElement('div');\n\t\t\tthis.panel.id = 'staple-overlay';\n\t\t\tthis.panel.classList.add('staple-overlay');\n\t\t\tthis.updater = new PeriodicalTask(100, false, this);\n\t\t\tthis.darkness = 0;\n\t\t}\n\n\t\tresume () {\n\t\t\twindow.document.body.appendChild(this.panel);\n\t\t\tthis.updater.start(true);\n\t\t}\n\n\t\tpause () {\n\t\t\tthis.updater.stop();\n\t\t\twindow.document.body.removeChild(this.panel);\n\t\t}\n\n\t\tdarken () {\n\t\t\t++this.darkness;\n\t\t\tthis.updater.start(true);\n\t\t}\n\n\t\tlighten () {\n\t\t\t--this.darkness;\n\t\t\tthis.updater.start(true);\n\t\t}\n\n\t\trun () {\n\t\t\tlet panel = this.panel;\n\n\t\t\tif (panel.childElementCount === 0)\n\t\t\t\tpanel.classList.remove('staple-active');\n\t\t\telse\n\t\t\t\tpanel.classList.add('staple-active');\n\n\t\t\tif (this.darkness === 0)\n\t\t\t\tpanel.classList.remove('staple-overlay-dim');\n\t\t\telse\n\t\t\t\tpanel.classList.add('staple-overlay-dim');\n\t\t}\n\n\t\tattach (overlay) {\n\t\t\tthis.panel.appendChild(overlay);\n\t\t\tthis.updater.start(true);\n\t\t}\n\n\t\tdetach (overlay) {\n\t\t\tthis.panel.removeChild(overlay);\n\t\t\tthis.run();\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tlet target = this.panel.lastElementChild;\n\t\t\twhile (target) {\n\t\t\t\tif (target.handleBackPressed())\n\t\t\t\t\treturn true;\n\t\t\t\ttarget = target.previousElementSibling;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tclass Interaction {\n\n\t\tconstructor ($peeker, context) {\n\t\t\tthis[$attrs] = this[$peeker] = {context: context};\n\t\t\tthis[$temps] = {};\n\t\t}\n\n\t\tinvokeMethodAndEnsureSuperCalled (method) {\n\t\t\tthis[$temps][method] = false;\n\t\t\tlet result = this[method].apply(this, Array.prototype.slice.call(arguments, 1));\n\t\t\tif (this[$temps][method] != method)\n\t\t\t\tthrow new Error('super.' + method + '() not called in ' + this.constructor.name + '.' + method + '()');\n\t\t\tdelete this[$temps][method];\n\t\t\treturn result;\n\t\t}\n\n\t\tnotifySuperCalled (method) {\n\t\t\tthis[$temps][method] = method;\n\t\t}\n\n\t\tcreate (state) {\n\t\t\tlet attrs = this[$attrs];\n\t\t\tattrs.active = false;\n\t\t\tattrs.tasks = {};\n\t\t\tattrs.overlayManager = new OverlayManager();\n\n\t\t\tattrs.creating = true;\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onCreate', state);\n\t\t\tdelete attrs.creating;\n\n\t\t\t// Delegate click event.\n\t\t\tthis[$attrs].root.onclick = event => {\n\t\t\t\tlet target = event.target;\n\t\t\t\twhile (target) {\n\t\t\t\t\tlet handler = this[target.getAttribute('staple:click')];\n\t\t\t\t\tif (Object.prototype.toString.call(handler) === '[object Function]') {\n\t\t\t\t\t\thandler.call(this, target);\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\ttarget = target.parentElement;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tonCreate (state) {\n\t\t\tthis.notifySuperCalled('onCreate');\n\t\t}\n\n\t\tperformRestoreInstanceState (state) {\n\t\t\tthis.onRestoreInstanceState(state);\n\t\t}\n\n\t\tonRestoreInstanceState (state) {\n\t\t\t// Default do nothing.\n\t\t}\n\n\t\tresume () {\n\t\t\tthis[$attrs].active = true;\n\t\t\tApplication.sharedInstance.onTitleChanged(this.getTitle());\n\t\t\tthis[$attrs].overlayManager.resume();\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onResume');\n\t\t}\n\n\t\tonResume () {\n\t\t\tthis.notifySuperCalled('onResume');\n\t\t}\n\n\t\tonInteractionResult (request, result, data) {\n\t\t\t// Default do nothing.\n\t\t}\n\n\t\tpause () {\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onPause');\n\t\t\tthis[$attrs].overlayManager.pause();\n\t\t\tthis[$attrs].active = false;\n\t\t}\n\n\t\tonPause () {\n\t\t\tthis.notifySuperCalled('onPause');\n\t\t}\n\n\t\tperformSaveInstanceState (state) {\n\t\t\tthis.onSaveInstanceState(state);\n\t\t}\n\n\t\tonSaveInstanceState (state) {\n\t\t\t// Default do nothing.\n\t\t}\n\n\t\tdestroy () {\n\t\t\tthis.invokeMethodAndEnsureSuperCalled('onDestroy');\n\t\t\tlet tasks = this[$attrs].tasks;\n\t\t\tfor (let key in tasks) {\n\t\t\t\tlet task = tasks[key];\n\t\t\t\ttask.stop();\n\t\t\t\tdelete tasks[key];\n\t\t\t}\n\t\t}\n\n\t\tonDestroy () {\n\t\t\tthis.notifySuperCalled('onDestroy');\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tif (this[$attrs].overlayManager.handleBackPressed())\n\t\t\t\treturn;\n\t\t\tthis.onBackPressed();\n\t\t}\n\n\t\tonBackPressed () {\n\t\t\tthis.finish();\n\t\t}\n\n\t\tfinish () {\n\t\t\tlet im = InteractionManager.sharedInstance;\n\t\t\tim.finishInteraction(this[$attrs].context.uuid);\n\t\t}\n\n\t\tstartInteraction (name, extra, request) {\n\t\t\tlet im = InteractionManager.sharedInstance, context = this[$attrs].context,\n\t\t\t\tparent = request ? context.uuid : undefined;\n\t\t\tif (!request)\n\t\t\t\trequest = undefined;\n\t\t\tim.startInteraction(parent, request, name, extra);\n\t\t}\n\n\t\tgetExtra () {\n\t\t\treturn this.extra;\n\t\t}\n\n\t\tget extra () {\n\t\t\treturn this[$attrs].context.extra;\n\t\t}\n\n\t\tgetUUID () {\n\t\t\treturn this.uuid;\n\t\t}\n\n\t\tget uuid () {\n\t\t\treturn this[$attrs].context.uuid;\n\t\t}\n\n\t\tget overlayManager () {\n\t\t\treturn this[$attrs].overlayManager;\n\t\t}\n\n\t\tgetApplication () {\n\t\t\treturn this.application;\n\t\t}\n\n\t\tget application () {\n\t\t\treturn Application.sharedInstance;\n\t\t}\n\n\t\tsetResult (result, data) {\n\t\t\tlet context = this[$attrs].context;\n\t\t\tcontext.resultCode = result;\n\t\t\tcontext.resultData = data;\n\t\t}\n\n\t\tgetPreferences (name, shared) {\n\t\t\treturn Application.sharedInstance.getPreferences(name, shared);\n\t\t}\n\n\t\tsetContent (content) {\n\t\t\tif (!this[$attrs].creating)\n\t\t\t\tthrow new Error('setContent() must be called during onCreate()');\n\n\t\t\tif (Object.prototype.toString.call(content) === '[object String]') {\n\t\t\t\tlet elements = HTMLParser.parse(content);\n\t\t\t\tif (elements.length != 1)\n\t\t\t\t\tthrow new Error('Invalid content');\n\t\t\t\tcontent = elements[0];\n\t\t\t}\n\n\t\t\tif (!(content instanceof HTMLElement))\n\t\t\t\tthrow new Error('Content must be an HTML element');\n\n\t\t\tcontent.classList.add('staple-interaction');\n\t\t\tthis[$attrs].root = content;\n\t\t}\n\n\t\tgetTitle () {\n\t\t\tlet root = this[$attrs].root, title = root ? root.dataset.title : undefined;\n\t\t\treturn title ? title : Application.sharedInstance.title;\n\t\t}\n\n\t\tsetTitle (title) {\n\t\t\tthis[$attrs].root.dataset.title = title;\n\t\t\tif (!this[$attrs].active)\n\t\t\t\treturn title;\n\t\t\tlet reslovedTitle = title ? title : Application.sharedInstance.title;\n\t\t\tApplication.sharedInstance.onTitleChanged(reslovedTitle);\n\t\t\treturn title;\n\t\t}\n\n\t\tget title () {\n\t\t\treturn getTitle();\n\t\t}\n\n\t\tset title (title) {\n\t\t\treturn setTitle(title);\n\t\t}\n\n\t\tselect(selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn [ root ];\n\t\t\treturn $A(root.querySelectorAll(selector));\n\t\t}\n\n\t\tselectOne(selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn root;\n\t\t\treturn root.querySelector(selector);\n\t\t}\n\n\t\tscheduleRunnable (runnable, ms, repeat) {\n\t\t\tlet task = new PeriodicalTask(ms, repeat, runnable)\n\t\t\ttask.runnable = runnable;\n\t\t\tthis[$attrs].tasks[task.id] = task;\n\t\t\ttask.start();\n\t\t\treturn task.id;\n\t\t}\n\n\t\tcancelRunnables (runnable) {\n\t\t\tlet tasks = this[$attrs].tasks;\n\n\t\t\tif (Number.isInteger(runnable)) {\n\t\t\t\tlet task = tasks[runnable];\n\t\t\t\tif (task) {\n\t\t\t\t\ttask.stop();\n\t\t\t\t\tdelete tasks[runnable];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (let key in tasks) {\n\t\t\t\t\tlet task = tasks[key];\n\t\t\t\t\tif (task.runnable !== runnable)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\ttask.stop();\n\t\t\t\t\tdelete tasks[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Interaction', {value: Interaction});\n\tObject.defineProperty(exports, 'default', {value: Interaction});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/nls.js\n * @author\tEric.Tsai\n *\n */\n\n// A module usd to load specified NLS(Native Language Support) bundle.\ndefine('staple/nls', function (require, exports, module) {\n\n\tclass NLSBundleLoader {\n\n\t\tconstructor (bundle, languages, require, onload) {\n\t\t\tthis.bundle = bundle;\n\t\t\tthis.languages = languages;\n\t\t\tthis.require = require;\n\t\t\tthis.onload = onload;\n\t\t}\n\n\t\tload () {\n\t\t\t// Load master of NLS bundle.\n\t\t\trequire([this.bundle + '/master'], this.onMasterLoaded.bind(this));\n\t\t}\n\n\t\tonMasterLoaded (master) {\n\t\t\tlet parts = this.parts = [], needed = this.needed = [],\n\t\t\t\tnames = [];\n\t\t\tlet languages = this.languages;\n\n\t\t\tthis.master = master = master.default;\n\n\t\t\t// Checkout which stand-alone NLS parts need to load.\n\t\t\tfor (let i = languages.length - 1; i >= 0; --i) {\n\t\t\t\tlet language = languages[i];\n\t\t\t\tif (!language)\n\t\t\t\t\tcontinue;\n\t\t\t\tlanguage = language.toLowerCase();\n\t\t\t\tlet value = master[language];\n\t\t\t\tif (!value)\n\t\t\t\t\tcontinue;\n\t\t\t\tparts.push(language);\n\t\t\t\tif (typeof value === 'object')\n\t\t\t\t\tcontinue;\n\t\t\t\tneeded.push(language);\n\t\t\t\tnames.push(this.bundle + '/' + language);\n\t\t\t}\n\n\t\t\t// Load needed stand-alone NLS parts\n\t\t\tthis.require(names, this.onPartsLoaded.bind(this));\n\t\t}\n\n\t\tonPartsLoaded () {\n\t\t\tlet master = this.master, needed = this.needed, parts = this.parts,\n\t\t\t\tvalues = {};\n\n\t\t\t// Add add stand-along NLS part to master.\n\t\t\tfor (let i = 0; i < needed.length; ++i)\n\t\t\t\tmaster[needed[i]] = arguments[i].default;\n\n\t\t\t// Mixin all locale parts into a bundle.\n\t\t\tlet bundle = {'@name' : this.bundle};\n\t\t\tfor (let i = 0, source; source = master[parts[i]]; ++i)\n\t\t\t\tfor (let prop in source)\n\t\t\t\t\tbundle[prop] = source[prop];\n\n\t\t\t// Create exports\n\t\t\tlet exports = {};\n\t\t\tfor (let prop in bundle)\n\t\t\t\tObject.defineProperty(exports, prop, {value: bundle[prop]});\n\n\t\t\t// Notify bundle loaded.\n\t\t\tObject.defineProperty(exports, '__esModule', {value: true});\n\t\t\tObject.defineProperty(exports, 'default', {value: exports});\n\t\t\tthis.onload(exports);\n\t\t}\n\n\t}\n\n\tfunction load (name, require, onload, config) {\n\t\tif (config.isBuild)\n\t\t\treturn onload(null)\n\n\t\tlet languages = [];\n\n\t\t// Customized languages\n\t\tif (navigator.customizedLanguage)\n\t\t\tlanguages.push(navigator.customizedLanguage);\n\n\t\t// Browser languages\n\t\tif (navigator.language)\n\t\t\tlanguages.push(navigator.language);\n\t\tif (navigator.languages)\n\t\t\tlanguages = languages.concat(navigator.languages);\n\n\t\t// Default language\n\t\tlanguages.push('root');\n\n\t\t// Deduplicate\n\t\tlet unique = [], map = {};\n\t\tfor (let i = 0, lang; lang = languages[i]; ++i) {\n\t\t\tif (map[lang])\n\t\t\t\tcontinue;\n\t\t\tmap[lang] = true;\n\t\t\tunique.push(lang);\n\t\t}\n\t\tlanguages = unique;\n\n\t\t// Load bundle.\n\t\tlet loader = new NLSBundleLoader(name, languages, require, onload);\n\t\tloader.load();\n\t}\n\n\texports.load = load;\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/periodical-task.js\n * @author\tEric.Tsai\n *\n */\n\n// Periodical task.\ndefine('staple/periodical-task', function (require, exports, module) {\n\nconst $attrs = Symbol();\n\nlet sequence = 0;\n\nclass PeriodicalTask {\n\n\tconstructor (ms, repeat, runnable) {\n\t\tthis[$attrs] = {\n\t\t\trunnable: runnable,\n\t\t\tms: ms,\n\t\t\trepeat: repeat,\n\t\t\tid: ++sequence,\n\t\t};\n\t}\n\n\thandler () {\n\t\tlet attrs = this[$attrs];\n\t\tif (!attrs.repeat)\n\t\t\tdelete attrs.tid;\n\t\tlet runnable = attrs.runnable || this;\n\t\trunnable.run();\n\t}\n\n\tstart (restart) {\n\t\tlet attrs = this[$attrs];\n\t\tif (attrs.tid) {\n\t\t\tif (!restart)\n\t\t\t\treturn;\n\t\t\tlet stopFunc = attrs.repeat ? clearInterval : clearTimeout;\n\t\t\tstopFunc(attrs.tid);\n\t\t}\n\t\tlet startFunc = attrs.repeat ? setInterval : setTimeout;\n\t\tattrs.tid = startFunc(this.handler.bind(this), attrs.ms);\n\t}\n\n\tstop () {\n\t\tlet attrs = this[$attrs];\n\t\tif (!attrs.tid)\n\t\t\treturn;\n\t\tlet stopFunc = attrs.repeat ? clearInterval : clearTimeout;\n\t\tstopFunc(attrs.tid);\n\t\tdelete attrs.tid;\n\t}\n\n\tget running () {\n\t\treturn this[$attrs].tid ? true : false;\n\t}\n\n\tget id () {\n\t\treturn this[$attrs].id;\n\t}\n\n}\n\nObject.defineProperty(exports, '__esModule', {value: true});\nObject.defineProperty(exports, 'PeriodicalTask', {value: PeriodicalTask});\nObject.defineProperty(exports, 'default', {value: PeriodicalTask});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/popup.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple popup.\ndefine('staple/popup', function (require, exports, module) {\n\n\tconst PeriodicalTask = require('staple/periodical-task').default;\n\tconst HTMLParser = require('staple/html-parser').default;\n\n\tconst $attrs = Symbol();\n\n\tclass Popup {\n\n\t\tconstructor (interaction, gravity, content) {\n\t\t\tlet attrs = this[$attrs] = {};\n\n\t\t\tattrs.frame = window.document.createElement('div');\n\t\t\tattrs.frame.classList.add('staple-overlay-mask');\n\t\t\tattrs.frame.handleBackPressed = this.handleBackPressed.bind(this);\n\n\t\t\tattrs.gravity = gravity;\n\n\t\t\tif (content)\n\t\t\t\tthis.setContent(content);\n\n\t\t\tattrs.overlayManager = interaction.overlayManager;\n\n\t\t\tlet outsideTouchHandler = this.dismiss.bind(this);\n\n\t\t\tattrs.attachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.addEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.detachOutsideTouchHandler = function () {\n\t\t\t\tthis.frame.removeEventListener('click', outsideTouchHandler);\n\t\t\t};\n\n\t\t\tattrs.fadeinTask = new PeriodicalTask(100, false);\n\t\t\tattrs.fadeinTask.run = () => {\n\t\t\t\tlet root = this[$attrs].root;\n\t\t\t\tif (!root)\n\t\t\t\t\treturn;\n\t\t\t\troot.classList.add('staple-active');\n\t\t\t};\n\n\t\t\tattrs.attachTask = new PeriodicalTask(800, false);\n\t\t\tattrs.attachTask.run = attrs.attachOutsideTouchHandler.bind(attrs);\n\n\t\t\tattrs.detachTask = new PeriodicalTask(300, false);\n\t\t\tattrs.detachTask.run = attrs.overlayManager.detach.bind(attrs.overlayManager, attrs.frame);\n\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tsetContent (content) {\n\t\t\tif (Object.prototype.toString.call(content) === '[object String]') {\n\t\t\t\tlet elements = HTMLParser.parse(content);\n\t\t\t\tif (elements.length != 1)\n\t\t\t\t\tthrow new Error('Invalid content');\n\t\t\t\tcontent = elements[0];\n\t\t\t}\n\n\t\t\tif (!(content instanceof HTMLElement))\n\t\t\t\tthrow new Error('Content must be an HTML element');\n\n\t\t\tlet attrs = this[$attrs];\n\t\t\tcontent.addEventListener('click', evt => evt.stopPropagation());\n\t\t\tcontent.classList.add('staple-popup');\n\t\t\tattrs.frame.innerHTML = '';\n\t\t\tattrs.frame.appendChild(this[$attrs].root = content);\n\n\t\t\tif (!attrs.showing)\n\t\t\t\treturn;\n\t\t\tthis.adjustPopupPosition();\n\t\t}\n\n\t\tselect (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn [ root ];\n\t\t\treturn $A(root.querySelectorAll(selector));\n\t\t}\n\n\t\tselectOne (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn root;\n\t\t\treturn root.querySelector(selector);\n\t\t}\n\n\t\tshowAtLocation (x, y) {\n\t\t\tlet attrs = this[$attrs];\n\t\t\tattrs.x = x;\n\t\t\tattrs.y = y;\n\n\t\t\tif (!attrs.showing) {\n\t\t\t\tattrs.showing = true;\n\t\t\t\tattrs.overlayManager.attach(attrs.frame);\n\t\t\t\tattrs.fadeinTask.start(true);\n\t\t\t\tattrs.attachTask.start(true);\n\t\t\t\tattrs.detachTask.stop();\n\t\t\t}\n\n\t\t\tthis.adjustPopupPosition();\n\t\t}\n\n\t\tadjustPopupPosition () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing || !attrs.root)\n\t\t\t\treturn;\n\n\t\t\tlet ox = attrs.x, oy = attrs.y, x = ox, y = oy;\n\n\t\t\tlet pgstrs = (attrs.gravity || '').replace(/\\s+/g, '').split('|');\n\t\t\tfor (let i = 0, pg; pg = pgstrs[i]; ++i) {\n\t\t\t\tswitch (pg) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tx = ox;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top':\n\t\t\t\t\ty = oy;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tx = ox - attrs.root.offsetWidth;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\ty = oy - attrs.root.offsetHeight;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs.root.style.left = x + 'px';\n\t\t\tattrs.root.style.top = y + 'px';\n\t\t}\n\n\t\tshowAsDropDown (anchor, tx, ty, gravity) {\n\t\t\tlet arect = anchor.getBoundingClientRect();\n\n\t\t\tlet x = arect.left, y = arect.top;\n\t\t\tlet agstrs = (gravity || '').replace(/\\s+/g, '').split('|');\n\t\t\tfor (let i = 0, ag; ag = agstrs[i]; ++i) {\n\t\t\t\tswitch (ag) {\n\t\t\t\tcase 'left':\n\t\t\t\t\tx = arect.left;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'top':\n\t\t\t\t\ty = arect.top;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\tx = arect.right;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'bottom':\n\t\t\t\t\ty = arect.bottom;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.showAtLocation(x + (tx || 0), y + (ty || 0));\n\t\t}\n\n\t\tset gravity (gravity) {\n\t\t\tthis[$attrs].gravity = gravity;\n\t\t\treturn gravity;\n\t\t}\n\n\t\tget gravity () {\n\t\t\treturn this[$attrs].gravity;\n\t\t}\n\n\t\tdismiss () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tattrs.fadeinTask.stop();\n\t\t\tattrs.attachTask.stop();\n\t\t\tattrs.detachTask.start(true);\n\t\t\tattrs.detachOutsideTouchHandler();\n\t\t\tif (attrs.root)\n\t\t\t\tattrs.root.classList.remove('staple-active');\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tget showing () {\n\t\t\treturn this[$attrs].showing;\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\tthis.dismiss();\n\t\t\treturn true;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Popup', {value: Popup});\n\tObject.defineProperty(exports, 'default', {value: Popup});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/snippets.js\n * @author\tEric.Tsai\n *\n */\n\n// A module usd to load HTML snippets from an snippets file.\ndefine('staple/snippets', function (require, exports, module) {\n\n\tconst HTMLParser = require('staple/html-parser').default;\n\tconst [loadersMap, snippetsMap] = [{}, {}];\n\n\tclass SnippetsLoader {\n\n\t\tconstructor (path, require, onload) {\n\t\t\tthis.path = path;\n\t\t\tthis.require = require;\n\t\t\tthis.onload = onload;\n\t\t}\n\n\t\tnotifyError (text) {\n\t\t\tlet error = new Error('Failed to load snippet file: ' + this.path + '(' + text + ').');\n\t\t\tthis.onload.error(error);\n\t\t}\n\n\t\tload () {\n\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\txhr.open('get', this.require.toUrl(this.path + '.html'), true);\n\t\t\txhr.onreadystatechange = evt => {\n\t\t\t\tif (xhr.readyState != 4)\n\t\t\t\t\treturn;\n\t\t\t\tif (xhr.status != 200 && xhr.status != 0) // WKWebView returns 0 for file urls\n\t\t\t\t\treturn this.onHTMLNotLoaded(xhr);\n\t\t\t\tthis.onHTMLLoaded(xhr);\n\t\t\t};\n\t\t\txhr.send();\n\t\t}\n\n\t\tonHTMLLoaded (xhr) {\n\t\t\tlet html = this.html = xhr.responseText;\n\n\t\t\t// Find all NLS placeholders.\n\t\t\tlet matches = html.match(/\\[nls\\@[a-zA-Z0-9\\-\\/_]+:[a-zA-Z0-9\\-_]+\\]/g);\n\n\t\t\t// No NLS placeholders, mark ready and return.\n\t\t\tif (!matches || !matches.length)\n\t\t\t\treturn this.onNLSResolved();\n\n\t\t\t// Prepare to load NLS bundles.\n\t\t\tlet nlsphs = this.nlsphs = [], names = [], namemap = {};\n\t\t\tfor (let i = 0, match; match = matches[i]; ++i) {\n\t\t\t\tlet pair = match.substr(5, match.length - 6).split(':');\n\t\t\t\tnlsphs.push({\n\t\t\t\t\tmatch : match,\n\t\t\t\t\tname : pair[0],\n\t\t\t\t\tkey : pair[1],\n\t\t\t\t});\n\t\t\t\tif (namemap[pair[0]])\n\t\t\t\t\tcontinue;\n\t\t\t\tnamemap[pair[0]] = true;\n\t\t\t\tnames.push('staple/nls!' + pair[0]);\n\t\t\t}\n\n\t\t\t// Load NLS Bundles\n\t\t\tthis.require(names, this.onNLSLoaded.bind(this));\n\t\t}\n\n\t\tonHTMLNotLoaded (xhr) {\n\t\t\tthis.notifyError(xhr.status);\n\t\t}\n\n\t\tonNLSLoaded () {\n\t\t\tlet nlsphs = this.nlsphs, html = this.html;\n\n\t\t\t// Build a lookup map for loaded NLS bundles.\n\t\t\tlet bundles = {};\n\t\t\tfor (let i = 0, bundle; bundle = arguments[i]; ++i)\n\t\t\t\tbundles[bundle.default['@name']] = bundle.default;\n\n\t\t\t// Replace all NLS placeholders with NLS strings.\n\t\t\tfor (let i = 0, nlsph; nlsph = nlsphs[i]; ++i)\n\t\t\t\thtml = html.replace(nlsph.match, bundles[nlsph.name][nlsph.key]);\n\n\t\t\tthis.html = html;\n\t\t\tthis.onNLSResolved();\n\t\t}\n\n\t\tonNLSResolved () {\n\t\t\tlet html = this.html, head = window.document.head, snippets = {};\n\n\t\t\tfor (let i = 0, els = HTMLParser.parse(html), el; el = els[i]; ++i) {\n\t\t\t\tswitch (el.tagName.toLowerCase()) {\n\t\t\t\tcase 'style':\n\t\t\t\t\thead.appendChild(el);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'script':\n\t\t\t\t\tif (el.type !== 'text/html' || !el.id)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tObject.defineProperty(snippets, el.id, {value: el.innerHTML.trim()});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tObject.defineProperty(snippets, '__esModule', {value: true});\n\t\t\tObject.defineProperty(snippets, 'default', {value: snippets});\n\t\t\tthis.onload(snippets);\n\t\t}\n\n\t}\n\n\tfunction load (name, require, onload, config) {\n\t\tif (config.isBuild)\n\t\t\treturn onload(null);\n\n\t\tlet loader = new SnippetsLoader(name, require, onload);\n\t\tloader.load();\n\t};\n\n\texports.load = load;\n\n});\n","/*\n * Copyright (C) 2016 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/toast.js\n * @author\tEric.Tsai\n *\n */\n\n// Base class of staple toast.\ndefine('staple/toast', function (require, exports, module) {\n\n\tconst PeriodicalTask = require('staple/periodical-task').default;\n\tconst HTMLParser = require('staple/html-parser').default;\n\n\tconst $attrs = Symbol();\n\n\tclass Toast {\n\n\t\tconstructor (interaction, content, duration) {\n\t\t\tlet attrs = this[$attrs] = {};\n\n\t\t\tduration = (duration == 'long') ? 3800 : 1800;\n\n\t\t\tattrs.fadeinTask = new PeriodicalTask(100, false);\n\t\t\tattrs.fadeinTask.run = () => {\n\t\t\t\tthis[$attrs].frame.classList.add('staple-active');\n\t\t\t};\n\n\t\t\tattrs.fadeoutTask = new PeriodicalTask(duration, false);\n\t\t\tattrs.fadeoutTask.run = () => {\n\t\t\t\tthis[$attrs].frame.classList.remove('staple-active');\n\t\t\t\tthis[$attrs].dismissTask.start();\n\t\t\t};\n\n\t\t\tattrs.dismissTask = new PeriodicalTask(300, false);\n\t\t\tattrs.dismissTask.run = this.dismiss.bind(this);\n\n\t\t\tif (content)\n\t\t\t\tthis.setContent(content);\n\n\t\t\tattrs.overlayManager = interaction.overlayManager;\n\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tsetContent (content) {\n\t\t\tlet attrs = this[$attrs];\n\t\t\tif (attrs.frame)\n\t\t\t\tthrow new Error('Cannot setContent for a toast after it is initialized');\n\n\t\t\tif (Object.prototype.toString.call(content) === '[object String]') {\n\t\t\t\tlet elements = HTMLParser.parse(content);\n\t\t\t\tif (elements.length != 1)\n\t\t\t\t\tthrow new Error('Invalid content');\n\t\t\t\tcontent = elements[0];\n\t\t\t}\n\n\t\t\tif (!(content instanceof HTMLElement))\n\t\t\t\tthrow new Error('Content must be an HTML element');\n\n\t\t\tcontent.addEventListener('click', evt => {\n\t\t\t\tthis.show();\n\t\t\t\tevt.stopPropagation();\n\t\t\t});\n\t\t\tcontent.classList.add('staple-toast');\n\t\t\tattrs.frame = this[$attrs].root = content;\n\t\t\tattrs.frame.handleBackPressed = this.handleBackPressed.bind(this);\n\t\t}\n\n\t\tselect (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn [ root ];\n\t\t\treturn $A(root.querySelectorAll(selector));\n\t\t}\n\n\t\tselectOne (selector) {\n\t\t\tlet root = this[$attrs].root;\n\t\t\tif (selector === '$root')\n\t\t\t\treturn root;\n\t\t\treturn root.querySelector(selector);\n\t\t}\n\n\t\tshow () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing) {\n\t\t\t\tattrs.showing = true;\n\t\t\t\tattrs.overlayManager.attach(attrs.frame);\n\t\t\t}\n\n\t\t\tattrs.fadeinTask.start(false);\n\t\t\tattrs.fadeoutTask.start(true);\n\t\t\tattrs.dismissTask.stop();\n\t\t}\n\n\t\tdismiss () {\n\t\t\tlet attrs = this[$attrs];\n\n\t\t\tif (!attrs.showing)\n\t\t\t\treturn;\n\n\t\t\tattrs.fadeoutTask.stop();\n\t\t\tattrs.fadeinTask.stop();\n\t\t\tattrs.dismissTask.stop();\n\t\t\tattrs.overlayManager.detach(attrs.frame);\n\t\t\tattrs.showing = false;\n\t\t}\n\n\t\tget showing () {\n\t\t\treturn this[$attrs].showing;\n\t\t}\n\n\t\thandleBackPressed () {\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'Toast', {value: Toast});\n\tObject.defineProperty(exports, 'default', {value: Toast});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/uuid.js\n * @author\tEric.Tsai\n *\n */\n\n// UUID generator.\ndefine('staple/uuid', function (require, exports, module) {\n\n\tconst CHARS = \"0123456789ABCDEF\".split(\"\");\n\n\tclass UUID {\n\n\t\tconstructor () {\n\t\t\tthrow new Error('This class can not be initialized');\n\t\t}\n\n\t}\n\n\tUUID.randomUUID = function () {\n\t\tlet chars = CHARS, uuid = new Array(36), rnd=0, r;\n\t\tfor (let i = 0; i < 36; i++) {\n\t\t\tif (i==8 || i==13 || i==18 || i==23) {\n\t\t\t\tuuid[i] = \"-\";\n\t\t\t} else if (i==14) {\n\t\t\t\tuuid[i] = \"4\";\n\t\t\t} else {\n\t\t\t\tif (rnd <= 0x02) rnd = 0x2000000 + (Math.random()*0x1000000)|0;\n\t\t\t\tr = rnd & 0xf;\n\t\t\t\trnd = rnd >> 4;\n\t\t\t\tuuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\n\t\t\t}\n\t\t}\n\t\treturn uuid.join(\"\");\n\t};\n\n\tObject.defineProperty(exports, '__esModule', {value: true});\n\tObject.defineProperty(exports, 'UUID', {value: UUID});\n\tObject.defineProperty(exports, 'default', {value: UUID});\n\n});\n","/*\n * Copyright (C) 2018 iWARES Solution Provider\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n/**\n * @file\tcore/noumenon.js\n * @author\tEric.Tsai\n *\n */\n\n\n(function () {\n\n\n// Staple object.\nconst staple = {value: '1.1.5'};\n\n// Preprocess all query parameters.\nlet args = JSON.parse(window.sessionStorage['staple:///args'] || '{}');\n\nlet search = window.location.search;\nlet interaction, extra, bust;\n\nif (search) {\n\tlet fields = search.substr(1).split('&');\n\targs = { };\n\n\tfor (let i = 0, field; field = fields[i]; ++i) {\n\t\tlet kv = field.split('=');\n\t\tswitch (kv[0]) {\n\t\tcase '_int':\n\t\t\tinteraction = decodeURIComponent(kv[1]);\n\t\t\tbreak;\n\t\tcase '_ext':\n\t\t\textra = decodeURIComponent(kv[1]);\n\t\t\tbreak;\n\t\tcase '_bust':\n\t\t\tbust = decodeURIComponent(kv[1]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\targs[kv[0]] = decodeURIComponent(kv[1]);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\twindow.sessionStorage['staple:///args'] = JSON.stringify(args);\n}\n\n// Collect all meta data.\nlet metaTags = window.document.head.querySelectorAll(\"meta\");\nlet meta = { };\nfor (let i = 0, tag; tag = metaTags[i]; ++i)\n\tmeta[tag.name] = tag.content;\nwindow.document.head.meta = meta;\n\n// Build a query string which will be used to bust the http cache.\nbust = window.sessionStorage['staple:///bust'] || bust || meta['version-code'];\nif (bust == 'timestamp')\n\tbust = (new Date()).getTime();\nwindow.sessionStorage['staple:///bust'] = bust || '';\n\n// Compute root path.\nlet mainScript = window.document.head.querySelector('script[data-main]');\nlet scriptPath = mainScript.dataset.main;\nlet base = mainScript.dataset.base;\nlet home = mainScript.dataset.home;\nlet stapleRoot = scriptPath.substr(0, scriptPath.lastIndexOf('/') + 1);\n\nrequirejs.config({\n\t'baseUrl': base || '',\n\t'urlArgs': bust ? '_bust=' + bust : undefined,\n\t'waitSeconds': 15,\n\t'paths': {\n\t\t'staple': stapleRoot + 'modules'\n\t},\n});\n\n\n// Entry of the staple framework.\nrequire(['application', 'staple/application'], function (subclass, baseclass) {\n\n\tconst Application = subclass.default;\n\tconst BaseClass = baseclass.default;\n\tconst application = staple.application = new Application();\n\n\tif (!application instanceof BaseClass)\n\t\tthrow new Error(subclass.name + ' is not a subclass of \"staple/application\"');\n\n\tObject.defineProperty(application, 'namespace', {value: window.location.pathname});\n\tObject.defineProperty(application, 'title', {value: window.document.title});\n\tObject.defineProperty(application, 'meta', {value: window.document.head.meta});\n\tObject.defineProperty(application, 'args', {value: args});\n\n\treturn application.start(home, interaction, extra);\n\n});\n\n\n// Export staple as a global variable.\nwindow.staple = staple;\n\n\n})();\n"]}